<!DOCTYPE html>
<html>

<head>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@^4.0.0/dist/aframe-event-set-component.min.js"></script>
</head>

<body>
    <a-scene>

        <!-- camera -->
        <a-camera>
            <a-entity cursor position="0 0 -1" geometry="primitive: sphere; radius: 0.005"
                material="color:white; shader: flat; opacity: 0.5">
            </a-entity>
        </a-camera>

        <a-text value="MidTerm Project" position="0 -5 -2.2" animation="property: position; 
                        to: 0 2.7 -2.2; 
                        dur: 2000; 
                        easing: linear; 
                        loop: false">
        </a-text>

        <!-- earth -->
        <a-entity>
            <a-entity id="earthEntity" gltf-model="src/Earth_1_12756.glb" scale="0.001 0.001 0.001"
                position="-1.0365 1.523 -2.74558" event-set__mouseenter="_event: mouseenter; scale: 0.002 0.002 0.002;"
                animation="property: rotation; to: 0 360 0; loop: true; dur: 10000"
                event-set__mouseleave="_event: mouseleave; scale: 0.001 0.001 0.001;" onclick="toggleEarth();">
            </a-entity>

            <a-entity id="earthEntitytemp" position="-1.0365 1.523 -2.74558"></a-entity>

            <a-plane id="infoEarth" position="-1.14608 1.57004 -2.20429" scale="1.35215 1.75185 1"
                visible="false"></a-plane>

            <a-text id="textEarth" value="Q NA HEE TEST TEST" position="-1.83499 1.95801 -2.20098" visible="false"
                text="color: #050505">
            </a-text>
        </a-entity>

        <a-sky src="src/bg.jpg"></a-sky>

    </a-scene>
</body>

</html>

<script>

    function toggleEarth() {
        // กล่องข้อความ
        var infoEarth = document.getElementById('infoEarth');
        var textEarth = document.getElementById('textEarth');

        var isInfoEarthVisible = infoEarth.getAttribute('visible');
        var isTextEarthVisible = textEarth.getAttribute('visible');

        infoEarth.setAttribute('visible', !isInfoEarthVisible);
        textEarth.setAttribute('visible', !isTextEarthVisible);

        // โลกขยับไปมา
        var earthEntity = document.getElementById('earthEntity');
        var earthEntitytemp = document.getElementById('earthEntitytemp');
        var earthPosition = earthEntity.getAttribute('position');
        var tempPosition = earthEntitytemp.getAttribute('position');

        // ตรวจสอบว่าตำแหน่งปัจจุบันของ earthEntity เท่ากับตำแหน่งเริ่มต้นหรือไม่
        if (earthPosition.equals(tempPosition)) {
            // ถ้าเท่ากันให้เปลี่ยนตำแหน่งไปที่ตำแหน่งใหม่
            earthEntity.setAttribute('animation', 'property: position; to: 0.45341 1.523 -1.45939; loop: false; dur: 1000;');
        } else {
            // ถ้าไม่เท่ากันให้เปลี่ยนตำแหน่งกลับไปที่ตำแหน่งเริ่มต้น
            earthEntity.setAttribute('animation', 'property: position; to: -1.0365 1.523 -2.74558; loop: false; dur: 1000;');
        }
        earthEntity.setAttribute('animation__rotation', 'property: rotation; to: 0 360 0; loop: true; dur: 10000');


    }


</script>