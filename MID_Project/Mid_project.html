<!DOCTYPE html>
<html>

<head>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@^4.0.0/dist/aframe-event-set-component.min.js"></script>
</head>

<body>
    <a-scene>

        <!-- camera -->
        <a-camera>
            <a-entity cursor position="0 0 -1" geometry="primitive: sphere; radius: 0.005"
                material="color:white; shader: flat; opacity: 0.5">
            </a-entity>
        </a-camera>

        <a-text value="MidTerm Project" position="0 -5 -2.2" animation="property: position; 
                        to: 0 2.7 -2.2; 
                        dur: 2000; 
                        easing: linear; 
                        loop: false">
        </a-text>

        <!-- video -->

            <a-assets>
                <img id="play" src="src/play.jpg">
                <img id="pause" src="src/pause.jpg">
                <video id="kobo" src="src/Tokopedia x Kobo kanaeru.mp4" loop="true"></video>
                <audio id="minecraft" src="src/C418_Minecraft.mp3"></audio>
            </a-assets>
    
            <a-video src="#kobo" width="8" height="4.5" position="0 3 -9">
                <a-image id="videoControls" src="#play" position="0 -3 0" scale="0.5 0.5 1"
                play-pause>
                </a-image>
    
            </a-video>

        
        <!-- prop -->
        <a-entity id="prop">
            <!--<a-plane src="src/1.png" position="-0.00435 1.4131 -2.81745"></a-plane>-->

            <a-entity id="light" light="intensity: 0.6; castShadow: true" position="1.96532 1.64748 -2.25357"
                data-aframe-default-light="" aframe-injected=""
                rotation="3.153559704400051 -29.62879350180513 4.837482664289541"></a-entity>

        </a-entity>

        <!-- light -->
        <a-entity id="light">

            <a-entity id="light" light="intensity: 0.6; castShadow: true" position="1.96532 1.64748 -2.25357"
                data-aframe-default-light="" aframe-injected=""
                rotation="3.153559704400051 -29.62879350180513 4.837482664289541"></a-entity>

        </a-entity>


        <!-- sun -->
        <a-entity id="sun">
            <a-entity id="sunEntity" gltf-model="src/sun.glb" scale="0.05 0.05 0.05" position="2.02495 1.523 -2.74558"
                animation="property: rotation; to: 0 360 0; loop: true; dur: 10000">
            </a-entity>
        </a-entity>


        <!-- earth -->
        <a-entity id="earth">
            <a-entity id="earthEntity" gltf-model="src/Earth_1_12756.glb" scale="0.001 0.001 0.001"
                position="-1.0365 1.523 -2.74558" event-set__mouseenter="_event: mouseenter; scale: 0.002 0.002 0.002;"
                animation="property: rotation; to: 0 360 0; loop: true; dur: 10000"
                event-set__mouseleave="_event: mouseleave; scale: 0.001 0.001 0.001;" onclick="toggleEarth();">
            </a-entity>

            <a-entity id="earthEntitytemp" position="-1.0365 1.523 -2.74558"></a-entity>

            <a-plane id="infoEarth" position="-1.14608 1.57004 -2.20429" scale="1.35215 1.75185 1"
                visible="false"></a-plane>

            <a-text id="textEarth" value="Q NA HEE TEST TEST" position="-1.83499 1.95801 -2.20098" visible="false"
                text="color: #050505">
            </a-text>
        </a-entity>

        <a-sky src="src/bg.jpg"
        sound="src: #minecraft; autoplay: true; loop: true; position: false"></a-sky>

    </a-scene>
</body>

</html>

<script>

    // Earth Funtion
    function toggleEarth() {
        // กล่องข้อความ
        var infoEarth = document.getElementById('infoEarth');
        var textEarth = document.getElementById('textEarth');

        var isInfoEarthVisible = infoEarth.getAttribute('visible');
        var isTextEarthVisible = textEarth.getAttribute('visible');

        infoEarth.setAttribute('visible', !isInfoEarthVisible);
        textEarth.setAttribute('visible', !isTextEarthVisible);

        // โลกขยับไปมา
        var earthEntity = document.getElementById('earthEntity');
        var earthEntitytemp = document.getElementById('earthEntitytemp');
        var earthPosition = earthEntity.getAttribute('position');
        var tempPosition = earthEntitytemp.getAttribute('position');

        // ตรวจสอบว่าตำแหน่งปัจจุบันของ earthEntity เท่ากับตำแหน่งเริ่มต้นหรือไม่
        if (earthPosition.equals(tempPosition)) {
            // ถ้าเท่ากันให้เปลี่ยนตำแหน่งไปที่ตำแหน่งใหม่
            earthEntity.setAttribute('animation', 'property: position; to: 0.45341 1.523 -1.45939; loop: false; dur: 1000;');
        } else {
            // ถ้าไม่เท่ากันให้เปลี่ยนตำแหน่งกลับไปที่ตำแหน่งเริ่มต้น
            earthEntity.setAttribute('animation', 'property: position; to: -1.0365 1.523 -2.74558; loop: false; dur: 1000;');
        }
        earthEntity.setAttribute('animation__rotation', 'property: rotation; to: 0 360 0; loop: true; dur: 10000');

    }

    // Video Funtion
    AFRAME.registerComponent('play-pause', {
        init: function (){
            var myVideo = document.querySelector('#kobo');
            var videoControls = document.querySelector('#videoControls');
            this.el.addEventListener('click', function () {
                if (myVideo.paused) {
                    myVideo.play();
                    videoControls.setAttribute('src', '#pause');
                } else {
                    myVideo.pause();
                    videoControls.setAttribute('src', '#play');
                }
            });
        }
    });

</script>